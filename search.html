<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cari Donghua & Anime - huaStream.YYDZ</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <!-- Font Awesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  *,
*::before,
*::after { box-sizing: border-box; }

:root{
  --bg:#f6f8fb;
  --surface: rgba(255,255,255,0.85);
  --text:#0f1724;
  --muted:#6b7280;
  --accent1:#2563eb;
  --accent2:#7c3aed;
  --glass: rgba(255,255,255,0.6);
}

html,body{ height:100%; }

body{
  margin:0;
  font-family:'Poppins', 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg,#fbfdff 0%, #eef6ff 40%, var(--bg) 100%);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.4;
  -webkit-tap-highlight-color: transparent;
}

.container{
  max-width:1200px;
  margin:0 auto;
  padding:0 1rem;
}

/* header */
header{
  position:sticky;
  top:0;
  z-index:60;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1rem;
  padding:.65rem 0;
  backdrop-filter: blur(8px) saturate(120%);
  background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.55));
  border-bottom: 1px solid rgba(15,23,42,0.04);
  transition: box-shadow .22s ease, transform .18s ease;
}

header.elev{ box-shadow: 0 8px 30px rgba(15,23,42,0.06); transform: translateY(-1px); }

/* logo */
header h1{
  display:flex;
  align-items:center;
  gap:.6rem;
  margin:0;
  font-weight:800;
  font-size:1.25rem;
  letter-spacing:-0.2px;
  background: linear-gradient(90deg,var(--accent1),var(--accent2));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}

/* logo icon badge */
.logo-badge{
  display:inline-grid;
  place-items:center;
  width:36px;
  height:36px;
  border-radius:10px;
  background: linear-gradient(135deg, rgba(37,99,235,0.12), rgba(124,58,237,0.10));
  box-shadow: 0 6px 18px rgba(37,99,235,0.08);
  color:var(--accent1);
  font-size:1rem;
}

/* search form (pill) */
#searchForm{
  display:flex;
  align-items:center;
  gap:.3rem;
  padding:3px 6px;
  border-radius:9999px;
  background: var(--surface);
  box-shadow: 0 6px 18px rgba(2,6,23,0.04);
  border: 1px solid rgba(15,23,42,0.05);
  transition: box-shadow .18s ease, transform .18s ease;
  max-width: 260px; 
}

/* focus state */
#searchForm:focus-within{
  box-shadow: 0 10px 28px rgba(37,99,235,0.08);
  transform: translateY(-1.5px);
  border-color: rgba(99,102,241,0.12);
}

/* input */
#searchInput{
  background: transparent;
  border: none;
  padding:.4rem .6rem;
  width: 100%;
  max-width: 180px;   /* <-- lebih ramping */
  font: 500 .9rem/1.2 'Inter', system-ui, sans-serif;
  color:var(--text);
  caret-color: var(--accent1);
  outline: none;
}

/* button */
#searchBtn{
  display:inline-flex;
  align-items:center;
  gap:.3rem;
  border:none;
  padding:.4rem .7rem;
  border-radius:9999px;
  font-weight:600;
  font-size:.85rem;
  color:#fff;
  background: linear-gradient(90deg,var(--accent1),var(--accent2));
  cursor:pointer;
  box-shadow: 0 8px 20px rgba(37,99,235,0.1);
  transition: transform .14s cubic-bezier(.2,.8,.2,1), box-shadow .14s ease;
}

/* hover/active */
#searchBtn:hover{ transform: translateY(-2px); box-shadow: 0 14px 28px rgba(37,99,235,0.14); }
#searchBtn:active{ transform: translateY(0); box-shadow: 0 6px 16px rgba(37,99,235,0.1); }

/* responsive */
@media (max-width:880px){
  .container{ padding:0 .9rem; }
  #searchForm{ max-width: 100%; }
  #searchInput{ max-width: 100%; }
}

@media (max-width:640px){
  header{ flex-direction:column; align-items:stretch; gap:.6rem; padding:.6rem 0; }
  header h1{ justify-content:center; width:100%; }
  #searchForm{ width:100%; max-width: 100%; } 
  #searchInput{ flex:1; width:100%; }
  #searchBtn{ padding:.5rem .7rem; font-size:.85rem; }
}

/* dark mode */
@media (prefers-color-scheme: dark){
  :root{ --text:#e6eef8; --muted:#9ca3af; --bg:#071025; --surface: rgba(10,14,20,0.55); }
  body{ background: linear-gradient(180deg,#041226 0%, #071025 60%); color:var(--text); }
  header{ background: linear-gradient(180deg, rgba(8,10,15,0.6), rgba(6,8,12,0.55)); border-bottom: 1px solid rgba(255,255,255,0.03); }
  #searchForm{ background: var(--surface); border: 1px solid rgba(255,255,255,0.03); box-shadow: 0 10px 30px rgba(2,6,23,0.45); }
  #searchInput{ color:var(--text); }
}

.rekom-text {
  font-size: 1rem; /* kecil */
  font-weight: 600;
  text-align: center; /* tengah */
  margin-bottom: 0.75rem;
  color: #ffff; /* bisa diganti sesuai tema */
}

/* Gradient untuk ikon */
.gradient-icon {
  background: linear-gradient(90deg, #3b82f6, #06b6d4); /* biru ke cyan */
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* ===========================
   Container hasil search (Responsive & Padded)
=========================== */
#searchResults {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); /* auto-fit responsive */
  gap: 1rem; /* jarak antar card */
  margin-top: 0.5rem;
  padding: 0 1rem; /* padding kiri & kanan */
  transition: all 0.2s ease;
}

/* Padding lebih ramping di mobile */
@media (max-width: 640px) {
  #searchResults {
    gap: 0.75rem;
    padding: 0 0.5rem;
  }
}

/* Card styling */
#searchResults .bg-white {
  background: var(--surface, #fff);
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 6px 18px rgba(2,6,23,0.04);
  cursor: pointer;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  display: flex;
  flex-direction: column;
}

/* Hover effect */
#searchResults .bg-white:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 14px 28px rgba(37,99,235,0.14);
}

/* Image wrapper */
#searchResults .img-wrapper {
  position: relative;
  width: 100%;
  height: 140px;
  overflow: hidden;
  border-radius: 10px 10px 0 0;
}

#searchResults .img-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transition: transform 0.25s ease;
}

#searchResults .bg-white:hover img {
  transform: scale(1.05);
}

/* Episode badge */
#searchResults .episode-label {
  position: absolute;
  top: 6px;
  right: 6px;
  font-size: 0.65rem;
  font-weight: 600;
  background: linear-gradient(135deg, #2563eb, #7c3aed);
  color: #fff;
  padding: 0.15rem 0.35rem;
  border-radius: 6px;
  z-index: 10;
  white-space: nowrap;
}

/* Card content */
#searchResults .p-2 {
  padding: 0.5rem 0.5rem;
  text-align: center;
  overflow: visible;
}

#searchResults h3 {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text, #111);
  margin-bottom: 0.15rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#searchResults p {
  font-size: 0.7rem;
  color: var(--muted, #555);
  line-height: 1rem;
  white-space: normal;
  overflow: visible;
  text-overflow: unset;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  #searchResults .bg-white {
    background: var(--surface, #0a0e14);
    box-shadow: 0 6px 18px rgba(0,0,0,0.3);
  }
  #searchResults h3 { color: var(--text, #e6eef8); }
  #searchResults p { color: var(--muted, #9ca3af); }
}

/* ===========================
   Layout dasar agar footer di bawah
=========================== */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
/* ===========================
   Konten utama fleksibel
=========================== */
main {
  flex: 1; /* mengambil sisa ruang sehingga footer selalu di bawah */
  padding: 1rem;
}

/* ===========================
   Footer styling
=========================== */
.footer {
  background-color: var(--bg);
  color: var(--text);
  text-align: center;
  padding: 1rem 0 0; 
  border-radius: 1rem 1rem 0 0;
  font-family: 'Poppins', sans-serif;
  position: relative;
  flex-shrink: 0; /* jangan mengecil */
}

.footer .container {
  max-width: 600px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
  align-items: center;
  padding: 0.75rem 1rem;
  border-radius: 1rem;
  transition: box-shadow 0.2s ease, transform 0.15s ease;
}

.footer .container:active {
  box-shadow: 0 8px 20px rgba(37,99,235,0.3);
  transform: translateY(-1px);
}

.footer .copyright {
  font-size: 0.8rem;
}
.footer p {
  margin: 0.5rem 0;
}
.footer .contact-icons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  font-size: 1.3rem;
}

.footer .contact-icons a {
  transition: transform 0.2s;
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.footer .contact-icons a:active {
  transform: scale(1.2);
}

.footer .team {
  font-size: 0.75rem;
}

.footer::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 50px;
  background-color: var(--bg);
  z-index: -1;
}

.gradient-text {
  transition: transform 0.2s;
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  .footer {
    background-color: var(--surface, #0a0e14);
    color: var(--text, #e6eef8);
  }
}
</style>
</head>
<body class="text-gray-900">

  <!-- Header -->
  <header class="bg-white shadow p-4 flex justify-between items-center sticky top-0 z-50">
    <h1 class="text-2xl font-bold text-blue-600 flex items-center gap-2">
      HUASTREAM.YYDZ
    </h1>
    <form id="searchForm" class="flex items-center">
      <input type="text" id="searchInput" placeholder="Cari Donghua atau Anime..." class="focus:outline-none px-2 py-1 border rounded" required>
      <button type="submit" id="searchBtn" class="bg-blue-600 text-white px-3 py-2 hover:bg-blue-700 flex items-center gap-1">
        <i class="fas fa-search"></i> Cari
      </button>
    </form>
  </header>

  <main class="p-4 space-y-8">

    <!-- Hasil Pencarian -->
    <section>
      <h2 class="rekom-text">
        <i class="fas fa-search gradient-icon"></i> Hasil Pencarian
      </h2>
      <div id="searchResults" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
        <!-- Card hasil pencarian akan dimasukkan di sini -->
      </div>
    </section>

    <!-- Template Card -->
    <template id="cardTemplate">
      <div class="bg-white relative">
        <div class="img-wrapper relative">
          <img src="..." alt="">
          <span class="episode-label absolute top-1 right-1"></span>
        </div>
        <div class="p-2">
          <h3></h3>
          <p></p>
        </div>
      </div>
    </template>
<!-- Footer / Copyright & Contact -->
<footer class="footer">
  <div class="container">
    <p class="copyright">
      © 2025 <strong>HUASTREAM.YYDZ</strong>. All rights reserved.
    </p>
    <p class="contact-icons">
      <a href="https://wa.me/6283872031397" target="_blank" class="icon-gradient"><i class="fab fa-whatsapp"></i></a>
      <a href="https://t.me/Yudzxzy" target="_blank" class="icon-gradient"><i class="fab fa-telegram-plane"></i></a>
      <a href="mailto:yudaaryaardhana1122@email.com" class="icon-gradient"><i class="fas fa-envelope"></i></a>
    </p>
    <p class="team">
      Design & development <span class="font-semibold gradient-text">Tim Yudzxml</span>
    </p>
  </div>
</footer>
  </main>

<script>
const apiBase = 'https://api.yudzxyz.x-server.my.id/api/donghua?action=search&query=';
const searchForm = document.getElementById('searchForm');
const searchInput = document.getElementById('searchInput');
const searchResults = document.getElementById('searchResults');
const cardTemplate = document.getElementById('cardTemplate');

function createCard(item) {
  const card = cardTemplate.content.cloneNode(true);

  // Image
  const imgWrapper = card.querySelector('.img-wrapper');
  const imgEl = imgWrapper.querySelector('img');
  imgEl.src = item.image;
  imgEl.alt = item.title;

  // Episode / Latest / SubOrDub badge
  const episodeLabel = card.querySelector('.episode-label');
  episodeLabel.textContent = item.latest ? item.latest : (item.episode ? item.episode : '');
  if(item.subOrDub) episodeLabel.textContent += ` | ${item.subOrDub}`;

  // Title
  const titleEl = card.querySelector('h3');
  titleEl.textContent = item.title;

  // Genre
  const descEl = card.querySelector('p');
  descEl.textContent = item.genres || '';
  card.querySelector('div.bg-white')?.addEventListener('click', () => {
  window.location.href = `info.html?id=${item.link}`;
  });

  return card;
}

async function performSearch(query){
  searchResults.innerHTML = '<p class="col-span-full text-center text-gray-500">Loading...</p>';
  try{
    const res = await axios.get(apiBase + encodeURIComponent(query));
    const data = res.data;
    if(Array.isArray(data.result) && data.result.length){
      searchResults.innerHTML = '';
      data.result.forEach(item => {
        const card = createCard(item);
        searchResults.appendChild(card);
      });
    } else {
      searchResults.innerHTML = '<p class="col-span-full text-center text-gray-500">Tidak ada hasil ditemukan.</p>';
    }
  } catch(err){
    console.error(err);
    searchResults.innerHTML = '<p class="col-span-full text-center text-red-500">Terjadi kesalahan saat pencarian.</p>';
  }
}

searchForm.addEventListener('submit', e=>{
  e.preventDefault();
  const query = searchInput.value.trim();
  if(query) performSearch(query);
});

// Optional: jika ada query di URL
const urlParams = new URLSearchParams(window.location.search);
const q = urlParams.get('q');
if(q){
  searchInput.value = q;
  performSearch(q);
}
</script>

</body>
</html>